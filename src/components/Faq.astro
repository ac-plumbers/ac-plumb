---
import { Image } from 'astro:assets';
import antonio from '@/images/Antonio.png';
import Text from './fundations/elements/Text.astro';
---

<section class='py-16 px-4 sm:px-6 lg:px-8 bg-white'>
  <div class='max-w-7xl mx-auto'>
    <!-- Mobile Heading (Shows only on mobile) -->
    <div class='md:hidden mb-8'>
      <Text tag='h2' variant='displayLG' class=' font-bold text-text-00 mb-8 font-poppins'>
        Frequently Asked Questions
      </Text>
      <Text tag='p' variant="textLG" class='text-text-50 font-poppins'>
        Find answers to common questions about our plumbing services, pricing,
        and availability.
      </Text>
    </div>

    <!-- Two-column layout container with absolute positioning -->
    <div class='relative flex flex-col md:flex-row gap-8 md:gap-12'>
      <!-- Left Column: Heading and Contact Section - Absolute position on desktop -->
      <div class='w-full md:w-5/12 md:static order-2 md:order-1'>
        <div class='md:sticky md:top-24'>
          <!-- Heading (Hidden on mobile, shown on desktop) -->
          <div class='hidden md:block mb-8'>
            <h2 class='text-3xl font-bold text-text-00 mb-2'>
              Frequently Asked Questions
            </h2>
            <p class='text-text-50'>
              Find answers to common questions about our plumbing services,
              pricing, and availability.
            </p>
          </div>

          <!-- Contact Section -->
          <div>
            <p class='text-xl font-semibold text-text-00'>
              Have more questions?
            </p>
            <p class='text-text-50 mt-2'>
              We're here to help! Our team is ready to assist you with any
              plumbing concerns. We understand that each situation is unique,
              which is why we offer personalized consultations and expert
              advice.
            </p>

            <p class='text-xl font-semibold text-text-00 mt-6'>
              Your Contact Person
            </p>

            <div class='mt-4 flex flex-col sm:flex-row gap-6 items-start'>
              <div class='w-24 h-24 relative flex-shrink-0'>
                <Image
                  src={antonio}
                  alt='Alex Johnson'
                  width={96}
                  height={96}
                  class='w-full h-full object-cover rounded-full shadow'
                />
              </div>
              <div>
                <p class='font-bold text-text-00'>
                  Antonio Catalano<br />
                  <span class='font-normal'
                    >Master Plumber & Customer Service</span
                  >
                </p>
                <p class='mt-2 text-text-50'>
                  Email: <a
                    href='mailto:alex@acplumb.com'
                    class='text-primary-600 hover:text-primary-700'
                    >info@acplumb.co.uk</a
                  >
                </p>
                <p class='text-text-50'>
                  Phone: <a
                    href='tel:+15555551234'
                    class='text-primary-600 hover:text-primary-700'
                    >(555) 555-1234</a
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column: Accordion -->
      <div class='w-full md:w-7/12 order-1 md:order-2'>
        <div class='space-y-4'>
          <!-- FAQ Item 1 -->
          <div
            class='faq-item border border-neutral-200 rounded-md overflow-hidden'>
            <button
              class='faq-toggle w-full cursor-pointer p-4 text-lg font-medium text-text-00 flex justify-between items-center transition hover:bg-neutral-50 focus:outline-none'
              aria-expanded='false'>
              <span>What services do you offer?</span>
              <svg
                class='w-5 h-5 text-primary-500 transition-transform'
                fill='none'
                stroke='currentColor'
                viewBox='0 0 24 24'>
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M19 9l-7 7-7-7'></path>
              </svg>
            </button>
            <div class='faq-content px-4 pb-4 text-text-50 hidden'>
              We offer a comprehensive range of plumbing services including
              emergency repairs, leak detection, fixture installation, bathroom
              and kitchen renovations, water heater installation and repair,
              pipe repair and replacement, drain cleaning, and preventative
              maintenance.
            </div>
          </div>

          <!-- FAQ Item 2 -->
          <div
            class='faq-item border border-neutral-200 rounded-md overflow-hidden'>
            <button
              class='faq-toggle w-full cursor-pointer p-4 text-lg font-medium text-text-00 flex justify-between items-center transition hover:bg-neutral-50 focus:outline-none'
              aria-expanded='false'>
              <span>How quickly can you respond to emergency calls?</span>
              <svg
                class='w-5 h-5 text-primary-500 transition-transform'
                fill='none'
                stroke='currentColor'
                viewBox='0 0 24 24'>
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M19 9l-7 7-7-7'></path>
              </svg>
            </button>
            <div class='faq-content px-4 pb-4 text-text-50 hidden'>
              Our emergency response time is typically within 1-2 hours for
              urgent situations such as burst pipes or major leaks. We maintain
              a dedicated emergency team available 24/7, 365 days a year,
              including holidays and weekends. We prioritize calls based on
              severity to minimize property damage.
            </div>
          </div>

          <!-- FAQ Item 3 -->
          <div
            class='faq-item border border-neutral-200 rounded-md overflow-hidden'>
            <button
              class='faq-toggle w-full cursor-pointer p-4 text-lg font-medium text-text-00 flex justify-between items-center transition hover:bg-neutral-50 focus:outline-none'
              aria-expanded='false'>
              <span>Do you provide upfront pricing before starting work?</span>
              <svg
                class='w-5 h-5 text-primary-500 transition-transform'
                fill='none'
                stroke='currentColor'
                viewBox='0 0 24 24'>
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M19 9l-7 7-7-7'></path>
              </svg>
            </button>
            <div class='faq-content px-4 pb-4 text-text-50 hidden'>
              Yes, we believe in complete transparency with our pricing. After
              assessing the job, we provide a detailed written estimate before
              beginning any work. There are never any hidden fees or surprise
              charges. For standard services like drain cleaning or leak repair,
              we can often quote prices over the phone.
            </div>
          </div>

          <!-- FAQ Item 4 -->
          <div
            class='faq-item border border-neutral-200 rounded-md overflow-hidden'>
            <button
              class='faq-toggle w-full cursor-pointer p-4 text-lg font-medium text-text-00 flex justify-between items-center transition hover:bg-neutral-50 focus:outline-none'
              aria-expanded='false'>
              <span>How can I prevent frozen pipes in winter?</span>
              <svg
                class='w-5 h-5 text-primary-500 transition-transform'
                fill='none'
                stroke='currentColor'
                viewBox='0 0 24 24'>
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M19 9l-7 7-7-7'></path>
              </svg>
            </button>
            <div class='faq-content px-4 pb-4 text-text-50 hidden'>
              To prevent frozen pipes, insulate exposed pipes in unheated areas
              like basements and garages using foam pipe insulation. When
              temperatures drop below freezing, allow faucets to drip slightly
              to relieve pressure and keep water moving. Keep cabinet doors open
              to allow warm air circulation around pipes under sinks. We also
              offer professional winterization services for complete protection.
            </div>
          </div>

          <!-- FAQ Item 5 -->
          <div
            class='faq-item border border-neutral-200 rounded-md overflow-hidden'>
            <button
              class='faq-toggle w-full cursor-pointer p-4 text-lg font-medium text-text-00 flex justify-between items-center transition hover:bg-neutral-50 focus:outline-none'
              aria-expanded='false'>
              <span>What payment methods do you accept?</span>
              <svg
                class='w-5 h-5 text-primary-500 transition-transform'
                fill='none'
                stroke='currentColor'
                viewBox='0 0 24 24'>
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M19 9l-7 7-7-7'></path>
              </svg>
            </button>
            <div class='faq-content px-4 pb-4 text-text-50 hidden'>
              We accept multiple payment methods for your convenience, including
              all major credit cards (Visa, Mastercard, American Express,
              Discover), cash, checks, and digital payment options like Apple
              Pay and Google Pay. For larger renovation projects, we also offer
              financing options with flexible payment plans through our
              financing partners.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggles = document.querySelectorAll('.faq-toggle');

    toggles.forEach(toggle => {
      toggle.addEventListener('click', () => {
        const faqItem = toggle.parentElement;
        const content = toggle.nextElementSibling;
        const arrow = toggle.querySelector('svg');
        const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

        // Close all other items
        toggles.forEach(otherToggle => {
          if (
            otherToggle !== toggle &&
            otherToggle.getAttribute('aria-expanded') === 'true'
          ) {
            otherToggle.setAttribute('aria-expanded', 'false');
            otherToggle.nextElementSibling.classList.add('hidden');
            otherToggle.querySelector('svg').style.transform = '';
            otherToggle.classList.remove('bg-neutral-50');
          }
        });

        // Toggle the clicked item
        if (isExpanded) {
          toggle.setAttribute('aria-expanded', 'false');
          content.classList.add('hidden');
          arrow.style.transform = '';
          toggle.classList.remove('bg-neutral-50');
        } else {
          toggle.setAttribute('aria-expanded', 'true');
          content.classList.remove('hidden');
          arrow.style.transform = 'rotate(180deg)';
          toggle.classList.add('bg-neutral-50');
        }
      });
    });
  });
</script>
