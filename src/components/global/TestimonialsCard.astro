---
import Text from "@components/fundations/elements/Text.astro";

type Props = {
  title: string;
  review: {
    rating: string;
    content: string;
    date: string;
    location: string;
  };
};
const { title, review } = Astro.props as Props;
---

<div
  class="group fade-in-card flex h-full flex-col justify-between rounded-2xl border p-6 shadow-lg backdrop-blur-md transition-all duration-300 hover:scale-[1.03] hover:shadow-2xl"
  style="
    background: var(--color-background-100);
    border-color: var(--color-primary-100);
    box-shadow: 0 4px 24px 0 var(--color-shadow-50);
  "
>
  <!-- Rating Badge -->
  <div class="mb-4 flex items-center justify-between">
    <!-- Avatar Initials -->
    <!-- <div
      class="flex aspect-square min-h-[2.6rem] min-w-[2.6rem] items-center justify-center rounded-full text-lg font-bold shadow-md"
      style="background: var(--color-primary-100); color: var(--color-primary-700);"
    >
      {review.location ? review.location[0] : "A"}
    </div> -->
    <!-- Location Badge -->
    <span
      class="ml-2 rounded-full px-3 py-1 text-xs font-semibold shadow-sm"
      style="background: var(--color-accent-500); color: var(--color-background-00);"
      >{review.location}</span
    >
    <div
      class="ml-auto text-xs sm:text-sm"
      style="color: var(--color-primary-700);"
    >
      {review.date}
    </div>
  </div>

  <!-- Title & Content -->
  <div class="flex-grow">
    <Text
      variant="textLG"
      tag="h4"
      class="line-clamp-1 font-lato font-semibold sm:line-clamp-2"
      style="color: var(--color-primary-700);"
    >
      {title}
    </Text>
    <div class="relative mt-3">
      <Text
        variant="textBase"
        tag="p"
        class="rounded-lg p-3 shadow-sm"
        style="background: var(--color-background-00); color: var(--color-text-00);"
      >
        “{review.content}”
      </Text>
    </div>
  </div>

  <!-- Footer -->
  <div
    class="mt-4 border-t pt-3"
    style="border-color: var(--color-primary-100);"
  >
    <div class="flex items-center">
      <div class="flex">
        {
          [...Array(5)].map((_, i) => (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class={`h-4 w-4 transition-transform duration-200 group-hover:scale-110`}
              viewBox="0 0 20 20"
              fill="currentColor"
              style={`color: ${Number(review.rating) / 2 > i ? "var(--color-accent-500)" : "var(--color-neutral-300)"}`}
            >
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
            </svg>
          ))
        }
      </div>
      <span
        class="ml-2 text-xs font-semibold"
        style="color: var(--color-primary-700);">Verified Review</span
      >
    </div>
  </div>

  <!-- Fade-in animation for card -->
  <style>
    .fade-in-card {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.7s cubic-bezier(0.4, 2, 0.3, 1) forwards;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: none;
      }
    }
  </style>
</div>
