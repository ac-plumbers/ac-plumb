---
import { Image } from "astro:assets";
import antonio from "@/images/Antonio.png";
import Text from "@/components/fundations/elements/Text.astro";
---

<section class="bg-primary-50 px-4 py-16 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-7xl">
    <!-- Unified Heading (visible on all devices) -->
    <Text
      tag="h2"
      variant="displayLG"
      class="mb-8 font-poppins text-4xl font-bold text-text-00 sm:text-5xl"
    >
      Frequently Asked Questions
    </Text>
    <Text
      tag="p"
      variant="textXL"
      class="mb-12 font-poppins text-xl text-text-50 sm:text-2xl"
    >
      Find answers to common questions about our plumbing services, pricing, and
      availability.
    </Text>

    <!-- Two-column layout container with absolute positioning -->
    <div class="relative flex flex-col gap-8 md:flex-row md:gap-12">
      <!-- Left Column: Heading and Contact Section - Absolute position on desktop -->
      <div class="order-2 w-full md:static md:order-1 md:w-5/12">
        <div class="md:sticky md:top-24">
          <!-- Contact Section -->
          <div>
            <Text
              tag="h3"
              variant="displayMD"
              class="font-poppins text-2xl font-semibold text-text-00 sm:text-3xl"
            >
              Have more questions?
            </Text>
            <Text tag="p" variant="textBase" class="mt-2 text-text-50">
              We're here to help! Our team is ready to assist you with any
              plumbing concerns. We understand that each situation is unique,
              which is why we offer personalized consultations and expert
              advice.
            </Text>

            <Text
              tag="h4"
              variant="displaySM"
              class="mt-6 font-poppins text-xl font-semibold text-text-00 sm:text-2xl"
            >
              Your Contact Person
            </Text>

            <div class="mt-4 flex flex-col items-start gap-6 sm:flex-row">
              <div class="relative h-24 w-24 flex-shrink-0">
                <Image
                  src={antonio}
                  alt="Antonio Catalano"
                  width={96}
                  height={96}
                  class="h-full w-full rounded-full object-cover shadow"
                />
              </div>
              <div>
                <p class="font-bold text-text-00">
                  Antonio Catalano<br />
                  <span class="font-normal"
                    >Master Plumber & Customer Service</span
                  >
                </p>
                <p class="mt-2 text-text-50">
                  Email: <a
                    href="mailto:info@acplumb.co.uk"
                    class="text-primary-600 hover:text-primary-700"
                    >info@acplumb.co.uk</a
                  >
                </p>
                <p class="text-text-50">
                  Phone: <a
                    href="tel:+15555551234"
                    class="text-primary-600 hover:text-primary-700"
                    >(555) 555-1234</a
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column: Accordion -->
      <div class="order-1 w-full md:order-2 md:w-7/12">
        <div class="space-y-4">
          <!-- FAQ Items -->
          {
            [
              {
                question: "What services do you offer?",
                answer:
                  "We offer a comprehensive range of plumbing services including emergency repairs, leak detection, fixture installation, bathroom and kitchen renovations, water heater installation and repair, pipe repair and replacement, drain cleaning, and preventative maintenance.",
              },
              {
                question: "How quickly can you respond to emergency calls?",
                answer:
                  "Our emergency response time is typically within 1-2 hours for urgent situations such as burst pipes or major leaks. We maintain a dedicated emergency team available 24/7, 365 days a year, including holidays and weekends. We prioritize calls based on severity to minimize property damage.",
              },
              {
                question:
                  "Do you provide upfront pricing before starting work?",
                answer:
                  "Yes, we believe in complete transparency with our pricing. After assessing the job, we provide a detailed written estimate before beginning any work. There are never any hidden fees or surprise charges. For standard services like drain cleaning or leak repair, we can often quote prices over the phone.",
              },
              {
                question: "How can I prevent frozen pipes in winter?",
                answer:
                  "To prevent frozen pipes, insulate exposed pipes in unheated areas like basements and garages using foam pipe insulation. When temperatures drop below freezing, allow faucets to drip slightly to relieve pressure and keep water moving. Keep cabinet doors open to allow warm air circulation around pipes under sinks. We also offer professional winterization services for complete protection.",
              },
              {
                question: "What payment methods do you accept?",
                answer:
                  "We accept multiple payment methods for your convenience, including all major credit cards (Visa, Mastercard, American Express, Discover), cash, checks, and digital payment options like Apple Pay and Google Pay. For larger renovation projects, we also offer financing options with flexible payment plans through our financing partners.",
              },
            ].map((faq, idx) => (
              <div
                class="faq-item overflow-hidden rounded-md border border-neutral-200"
                key={idx}
              >
                <h3>
                  <button
                    class="faq-toggle flex w-full cursor-pointer items-center justify-between p-4 text-lg font-semibold text-text-00 transition hover:bg-neutral-50 focus:outline-none"
                    aria-expanded="false"
                  >
                    <span>{faq.question}</span>
                    <svg
                      class="h-5 w-5 text-primary-500 transition-transform"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 9l-7 7-7-7"
                      />
                    </svg>
                  </button>
                </h3>
                <div class="faq-content hidden px-4 pb-4 text-text-50">
                  {faq.answer}
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggles = document.querySelectorAll(".faq-toggle");

    toggles.forEach((toggle) => {
      toggle.addEventListener("click", () => {
        const faqItem = toggle.closest(".faq-item");
        const content = faqItem.querySelector(".faq-content");
        const arrow = toggle.querySelector("svg");
        const isExpanded = toggle.getAttribute("aria-expanded") === "true";

        // Close all other items
        toggles.forEach((otherToggle) => {
          if (
            otherToggle !== toggle &&
            otherToggle.getAttribute("aria-expanded") === "true"
          ) {
            otherToggle.setAttribute("aria-expanded", "false");
            otherToggle
              .closest(".faq-item")
              .querySelector(".faq-content")
              .classList.add("hidden");
            otherToggle.querySelector("svg").style.transform = "";
            otherToggle.classList.remove("bg-neutral-50");
          }
        });

        // Toggle the clicked item
        if (isExpanded) {
          toggle.setAttribute("aria-expanded", "false");
          content.classList.add("hidden");
          arrow.style.transform = "";
          toggle.classList.remove("bg-neutral-50");
        } else {
          toggle.setAttribute("aria-expanded", "true");
          content.classList.remove("hidden");
          arrow.style.transform = "rotate(180deg)";
          toggle.classList.add("bg-neutral-50");
        }
      });
    });
  });
</script>
