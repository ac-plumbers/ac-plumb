---
import { Image } from 'astro:assets';
import { fade } from 'astro:transitions';

import imgHero from '@/images/lavori/viessmann-boiler-internal-view-components-brighton.jpeg';
import Link from '@/components/fundations/elements/Link.astro';
import Text from '../fundations/elements/Text.astro';
// Content for the hero section
const heroContent = {
  heading:
    'Welcome to AC Plumbers Ltd., your trusted local experts in plumbing, heating, gas and renewable energy.',
  description:
    'We specialise in boiler installation, repair, and maintenance, central heating systems, and air source heat pump installations. Proudly serving homeowners across Brighton & Hove and the surrounding areas with reliable and professional service.',
  cta: {
    text: 'Get A Quote',
    href: '/contact-us',
  },
  image: {
    src: imgHero,
    alt: 'Internal view of Viessmann boiler showing expansion vessel and heat exchanger',
    title:
      'Inside a Viessmann Boiler â€“ High-Efficiency Components Installed by AC Plumbers Ltd. Brighton',
  },
};
---

<section id='hero' aria-labelledby='hero-heading'>
  <div class='relative'>
    <div class='mx-auto max-w-7xl'>
      <div class='relative z-10 pt-20 lg:w-full lg:max-w-2xl'>
        <!-- gap beteween hero and picture -->
        <svg
          class='absolute inset-y-0 right-8 hidden h-full w-80 translate-x-1/2 transform fill-neutral-50 lg:block'
          viewBox='0 0 100 100'
          preserveAspectRatio='none'
          aria-hidden='true'>
          <polygon points='0,0 90,0 50,100 0,100'></polygon>
        </svg>

        <div class='relative px-6 py-16 sm:py-20 lg:px-8 lg:py-28 lg:pr-0'>
          <div class='mx-auto max-w-2xl lg:mx-0 lg:max-w-xl'>
            <!-- Hero heading and text -->
            <Text
              tag='h1'
              id='hero-heading'
              variant='displayXL'
              transition:animate={fade({ duration: '0.9s' })}>
              <span slot='left-icon'> </span>
              {heroContent.heading}
            </Text>
            <Text tag='p' class='mt-8' variant='textBase'>
              {heroContent.description}
            </Text>
            <div class='mt-10 flex items-center gap-x-4 sm:gap-x-6'>
              <Link
                href={heroContent.cta.href}
                variant='accent-button'
                size='lg'>
                <span class='text-2xl uppercase sm:text-base'
                  >{heroContent.cta.text}
                </span>
              </Link>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class='bg-neutral-50 lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2'>
      <Image
        class='aspect-[3/2] object-cover lg:aspect-auto lg:size-full'
        src={heroContent.image.src}
        alt={heroContent.image.alt}
        title={heroContent.image.title}
      />
    </div>
  </div>
</section>
<script>
  // Mobile menu functionality
  document.addEventListener('DOMContentLoaded', () => {
    const openMenuButton = document.getElementById('open-menu-button');
    const closeMenuButton = document.getElementById('close-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuPanel = document.getElementById('menu-panel');
    const menuBackdrop = document.getElementById('menu-backdrop');

    function openMenu() {
      // Show the mobile menu
      if (mobileMenu) {
        mobileMenu.classList.remove('hidden');
      }

      // Allow time for the DOM to update before animating
      setTimeout(() => {
        if (menuPanel) {
          menuPanel.classList.remove('translate-x-full');
        }
      }, 10);

      // Prevent body scrolling
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      // Animate the panel out
      menuPanel?.classList.add('translate-x-full');

      // Hide the entire menu after animation completes
      setTimeout(() => {
        mobileMenu?.classList.add('hidden');
        document.body.style.overflow = '';
      }, 300); // Match this with your transition duration
    }

    // Event listeners
    if (openMenuButton) {
      openMenuButton.addEventListener('click', openMenu);
    }
    if (closeMenuButton) {
      closeMenuButton.addEventListener('click', closeMenu);
    }
    if (menuBackdrop) {
      menuBackdrop.addEventListener('click', closeMenu);
    }

    // Close menu when pressing Escape key
    document.addEventListener('keydown', e => {
      if (
        e.key === 'Escape' &&
        mobileMenu &&
        !mobileMenu.classList.contains('hidden')
      ) {
        closeMenu();
      }
    });
  });
</script>
