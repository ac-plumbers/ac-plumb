---
import Favicons from "./Favicons.astro";
import AstroSchema from "@/components/fundations/head/Schema.astro";
import Meta from "./Meta.astro";
import Seo from "./Seo.astro";

export interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  author?: string;
  themeColor?: string;
  canonical?: string;
  noindex?: boolean;
  schemaType?: string;
  datePublished?: string;
  dateModified?: string;
}

const {
  title,
  description,
  keywords,
  author,
  themeColor,
  canonical,
  noindex = false,
  schemaType = "WebPage",
  datePublished,
  dateModified,
} = Astro.props;

// Canonical URL logic with fallback for static pages
const canonicalURL =
  canonical ||
  (Astro.url
    ? new URL(Astro.url.pathname, Astro.site).href
    : String(Astro.site));
---

<!-- SEO with title, description, and canonical URL -->
<Seo
  title={title}
  description={description}
  canonical={canonicalURL}
  noindex={noindex}
/>

<!-- Additional meta tags (keywords, author, theme-color, etc.) -->
<Meta keywords={keywords} author={author} themeColor={themeColor} />

<!-- Schema -->
<AstroSchema
  type={schemaType}
  title={title}
  url={canonicalURL}
  description={description}
  datePublished={datePublished}
  dateModified={dateModified}
/>

<!-- Favicons -->
<Favicons />
