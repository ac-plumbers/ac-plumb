---
import { AstroSeo } from "@astrolib/seo";
import {
  BUSINESS_CONFIG,
  getFullAddress,
  formatPhoneForTel,
} from "@/utils/businessConfig";

export interface Props {
  title?: string;
  description?: string;
  canonical?: string;
  noindex?: boolean;
  ogImage?: string;
  ogType?: string;
}

const {
  title = `${BUSINESS_CONFIG.name} | Plumbing, Heating & Renewable Services in Brighton`,
  description = `${BUSINESS_CONFIG.name} provides top-notch plumbing, heating, and renewable energy services in Brighton. Our team is dedicated to delivering high-quality solutions with a focus on customer satisfaction.`,
  canonical = BUSINESS_CONFIG.website,
  noindex = false,
  ogImage = `${BUSINESS_CONFIG.website}/images/ac-plumbers-hero.jpg`,
  ogType = "website",
} = Astro.props;

const structuredData = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  name: BUSINESS_CONFIG.name,
  description:
    "Professional plumbing, heating, and renewable energy services in Brighton",
  url: BUSINESS_CONFIG.website,
  telephone: formatPhoneForTel(BUSINESS_CONFIG.phone),
  address: {
    "@type": "PostalAddress",
    streetAddress: BUSINESS_CONFIG.address.street,
    addressLocality: BUSINESS_CONFIG.address.city,
    postalCode: BUSINESS_CONFIG.address.postcode,
    addressCountry: "GB",
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: BUSINESS_CONFIG.geo.latitude,
    longitude: BUSINESS_CONFIG.geo.longitude,
  },
  openingHours: "Mo-Su 00:00-23:59",
  serviceArea: {
    "@type": "GeoCircle",
    geoMidpoint: {
      "@type": "GeoCoordinates",
      latitude: BUSINESS_CONFIG.geo.latitude,
      longitude: BUSINESS_CONFIG.geo.longitude,
    },
    geoRadius: BUSINESS_CONFIG.serviceRadius,
  },
  services: [
    "Emergency Plumbing",
    "Boiler Installation",
    "Central Heating",
    "Gas Safety Checks",
    "Landlord Services",
  ],
  priceRange: "££",
  image: ogImage,
};
---

<AstroSeo
  title={title}
  description={description}
  canonical={canonical}
  noindex={noindex}
  openGraph={{
    url: canonical,
    title: title,
    description: description,
    images: [
      {
        url: ogImage,
        width: 1200,
        height: 630,
        alt: `${BUSINESS_CONFIG.name} - Professional Plumbing Services`,
        type: "image/jpeg",
      },
    ],
    site_name: BUSINESS_CONFIG.name,
    type: ogType,
    locale: "en_GB",
  }}
/>

<!-- Structured Data (JSON-LD) -->
<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
