---
const {
  variant,
  size,
  onlyIconSize,
  gap,
  class: className,
  ...rest
} = Astro.props;

// Default/Primary button
const defaultClass = [
  'text-white',
  'bg-primary-500',
  'hover:bg-primary-600',
  'from-primary-400 to-primary-600 bg-gradient-to-br',
  'hover:from-primary-500 hover:to-primary-700',
  'shadow-md',
  'shadow-primary-500/20',
  'hover:shadow-primary-600/30',
  'ring-1 ring-primary-300/50',
  'focus:outline-primary-400',
  'outline-primary-300',
  'transform hover:-translate-y-0.5 active:translate-y-0',
  'transition-all duration-300',
];

// Accent button
const accentClass = [
  'text-text-00', // Dark text for better contrast with yellow
  'from-accent-400 via-accent-500 to-accent-600 bg-gradient-to-br',
  'hover:from-accent-500 hover:to-accent-700', // Darker gradient on hover
  'from-accent-400 to-accent-500 bg-gradient-to-br',
  'hover:from-accent-500 hover:to-accent-600',
  'shadow-lg shadow-accent-500/30',
  'shadow-accent-500/30',
  'hover:shadow-accent-600/40',
  'ring-2 ring-accent-300/50',
  'focus:outline-accent-400',
  'outline-accent-300',
  'transform hover:scale-105 active:scale-95',
  'transition-all duration-300',
  'from-accent-400 to-accent-600 bg-gradient-to-br',
];

// Secondary button (renamed from "muted")
const mutedClass = [
  'text-white',
  'bg-secondary-500',
  'hover:bg-secondary-600',
  'from-secondary-400 to-secondary-600 bg-gradient-to-br',
  'hover:from-secondary-500 hover:to-secondary-700',
  'shadow-md',
  'shadow-secondary-500/20',
  'hover:shadow-secondary-600/30',
  'ring-1 ring-secondary-300/50',
  'focus:outline-secondary-400',
  'outline-secondary-300',
  'transform hover:-translate-y-0.5 active:translate-y-0',
  'transition-all duration-300',
];

// Outline variant (new)
const outlineClass = [
  'text-primary-700',
  'bg-transparent',
  'hover:bg-primary-50',
  'ring-2 ring-primary-500',
  'hover:ring-primary-600',
  'shadow-sm',
  'hover:shadow-md',
  'focus:outline-primary-400',
  'outline-primary-300',
  'transform hover:-translate-y-0.5 active:translate-y-0',
  'transition-all duration-300',
];

// Size (only applies if variant is not "link")
const xs = ['h-8', 'px-6', 'py-2', 'text-xs rounded-lg'];
const sm = ['h-9', 'px-6', 'py-2', 'text-sm rounded-lg'];
const base = ['h-10', 'px-8', 'py-3', 'text-base rounded-xl'];
const md = ['h-11', 'px-8', 'py-3', 'text-md rounded-xl'];
const lg = ['h-12', 'px-8', 'py-3', 'text-lg rounded-xl'];
const xl = ['h-14', 'px-12', 'py-3', 'text-xl rounded-xl'];

// Gap
const gapXS = ['gap-2'];
const gapSM = ['gap-4'];
const gapBase = ['gap-8'];
const gapMD = ['gap-10'];
const gapLG = ['gap-12'];

const additionalClasses = className ? className.split(' ') : [];
---

<button
  class:list={[
    'flex',
    'relative',
    'transition',
    'text-center',
    'font-medium',
    'items-center',
    'justify-center',
    'duration-300',
    'ease-in-out',
    'outline',
    'focus:outline-offset-4',
    'focus-visible:outline-none focus:outline-2',
    variant === 'default' && defaultClass,
    variant === 'accent' && accentClass,
    variant === 'muted' && mutedClass,
    variant === 'outline' && outlineClass,
    variant === 'none' && [], // No additional classes for "none" variant
    size === 'xs' && xs,
    size === 'sm' && sm,
    size === 'base' && base,
    size === 'md' && md,
    size === 'lg' && lg,
    size === 'xl' && xl,
    gap === 'xs' && gapXS,
    gap === 'sm' && gapSM,
    gap === 'base' && gapBase,
    gap === 'md' && gapMD,
    gap === 'lg' && gapLG,
    ...additionalClasses,
  ]}
  {...rest}>
  <slot name='left-icon' />
  <slot />
  <slot name='right-icon' />
</button>
