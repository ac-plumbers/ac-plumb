---
// src/pages/services/index.astro
import ServicesLayout from "@/layouts/ServicesLayout.astro";
import { getCollection } from "astro:content";

// Get all services and sort (featured first, then alphabetically)
const allServices = await getCollection("services");
const services = allServices.sort((a, b) => {
  if (a.data.featured && !b.data.featured) return -1;
  if (!a.data.featured && b.data.featured) return 1;
  return a.data.title.localeCompare(b.data.title);
});
---

<ServicesLayout>
  <p class="mx-auto mt-6 max-w-2xl text-xl text-[--color-background-00]">
    Comprehensive plumbing solutions delivered with expertise and care across
    Brighton & Hove
  </p>
  <div
    class="mt-8 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2 lg:grid-cols-3"
  >
    {
      services.map((service) => (
        <a
          href={`/services/${service.slug}`}
          class="group block"
          aria-label={`View details for ${service.data.title}`}
        >
          <div class="overflow-hidden rounded-lg border border-[--color-primary-200] bg-[--color-neutral-100] p-6 shadow-sm transition-all hover:bg-[--color-primary-100] hover:shadow">
            <h3 class="text-lg font-medium text-[--color-primary-800] group-hover:text-[--color-primary-700]">
              {service.data.title}
            </h3>
            <p class="mt-2 line-clamp-2 text-sm text-[--color-text-00]">
              {service.data.description}
            </p>
            {/* Optionally render price, tags, or image here */}
          </div>
        </a>
      ))
    }
  </div>
</ServicesLayout>
